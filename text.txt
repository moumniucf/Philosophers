| Step              | Lwach tdir                       |
| ----------------- | -------------------------------- |
| 1. parsing        | argv\[] â†’ t\_data                |
| 2. init forks     | malloc + mutex\_init             |
| 3. init philos    | malloc + fork pointers           |
| 4. create threads | `pthread_create`                 |
| 5. routine        | think â†’ take forks â†’ eat â†’ sleep |
| 6. join threads   | ttsenna ykmlou                   |
| 7. cleanup        | free + destroy mutex             |

1. parsing â†’ t9ra l-args w t7tt f t_data
2. init_forks â†’ tsayb forks (mutexes) o t7tt f t_data
3. init_philos â†’ tsayb philosophers w t3ti kol wa7ed forks dyalo
4. create_threads â†’ routine dyal simulation


âœ… 1. L-marahil li khassk tteb3 bach t9ad mandatory clean (step-by-step):
ðŸ§© Marhala 0 â€“ Parsing arguments
T9ra argv[] (nb_philo, time_to_die, time_to_eat...)

Tvalidi les valeurs (kounou positif)

Tdirhom f struct t_data

ðŸ§© Marhala 1 â€“ Structs
t_data â†’ fih kol data (nb_philo, forks, time, flags...)

t_philo â†’ fih info dyal philosopher (id, left/right fork, meals, last_meal...)

ðŸ§© Marhala 2 â€“ init_forks()
tsayb nb_philo dyal forks b pthread_mutex_t

katdirhom f data->forks

kol fork = mutex

katdir pthread_mutex_init

ðŸ§© Marhala 3 â€“ init_philos()
katdir array dyal t_philo

kat3ti kol philosopher left_fork & right_fork

katli9hom b data->forks[i] & forks[(i + 1) % nb_philo]

t9der tzid timestamps w meals 0...

ðŸ§© Marhala 4 â€“ Create threads
kol philosopher kaywli pthread_create

routine dyalhoum f routine(void *arg)

ðŸ§© Marhala 5 â€“ routine()
Loop:

Think

Take forks (lock left, lock right)

Eat (update last_meal + sleep)

Drop forks (unlock)

Sleep

Dima b mutex (forks + print)

ðŸ§© Marhala 6 â€“ print_action()
katprint action (timestamp + id + msg)

katdkhl pthread_mutex_lock(&print_mutex)

bach thread wahed ykoun kayprint

ðŸ§© Marhala 7 â€“ monitor (mandatory too!)
kaychouf wach chi philosopher ma klach f time_to_die

ila mat â†’ katprint "died" o katsali simulation

ðŸ§© Marhala 8 â€“ Join threads o free
pthread_join l kol thread

pthread_mutex_destroy l kol fork

free() lphilosophers, forks, etc.